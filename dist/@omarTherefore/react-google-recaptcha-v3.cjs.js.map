{"version":3,"file":"react-google-recaptcha-v3.cjs.js","sources":["../../src/google-recaptcha-provider.tsx","../../node_modules/hoist-non-react-statics/dist/hoist-non-react-statics.cjs.js","../../src/with-google-recaptcha.tsx","../../src/google-recaptcha.tsx","../../src/use-google-recaptcha.tsx"],"sourcesContent":["import * as React from 'react';\n\nenum GoogleRecaptchaError {\n  SCRIPT_NOT_AVAILABLE = 'Google recaptcha is not available'\n}\n\ninterface IGoogleReCaptchaProviderProps {\n  reCaptchaKey?: string;\n  language?: string;\n  nonce?: string;\n}\n\nexport interface IGoogleReCaptchaConsumerProps {\n  executeRecaptcha?: (action?: string) => Promise<string>;\n}\n\nconst GoogleReCaptchaContext = React.createContext<\n  IGoogleReCaptchaConsumerProps\n>({\n  // dummy default context;\n});\n\nconst { Consumer: GoogleReCaptchaConsumer } = GoogleReCaptchaContext;\n\nexport { GoogleReCaptchaConsumer, GoogleReCaptchaContext };\n\nexport class GoogleReCaptchaProvider extends React.Component<\n  IGoogleReCaptchaProviderProps\n> {\n  scriptId = 'google-recaptcha-v3';\n  googleRecaptchaSrc = 'https://www.google.com/recaptcha/api.js';\n  resolver: any = undefined;\n  rejecter: any = undefined;\n\n  grecaptcha: Promise<any> = new Promise((resolve, reject) => {\n    this.resolver = resolve;\n    this.rejecter = reject;\n  });\n\n  componentDidMount() {\n    if (!this.props.reCaptchaKey) {\n      return;\n    }\n\n    this.injectGoogleReCaptchaScript();\n  }\n\n  componentDidUpdate(prevProps: IGoogleReCaptchaProviderProps) {\n    if (prevProps.reCaptchaKey || !this.props.reCaptchaKey) {\n      return;\n    }\n\n    this.injectGoogleReCaptchaScript();\n  }\n\n  get googleReCaptchaContextValue() {\n    return { executeRecaptcha: this.executeRecaptcha };\n  }\n\n  executeRecaptcha = async (action?: string) => {\n    const { reCaptchaKey } = this.props;\n\n    return this.grecaptcha.then(_grecaptcha =>\n      _grecaptcha.execute(reCaptchaKey, { action })\n    );\n  };\n\n  handleOnLoad = () => {\n    if (!window || !(window as any).grecaptcha) {\n      console.warn(GoogleRecaptchaError.SCRIPT_NOT_AVAILABLE);\n\n      return;\n    }\n\n    (window as any).grecaptcha.ready(() => {\n      this.resolver((window as any).grecaptcha);\n    });\n  };\n\n  injectGoogleReCaptchaScript = () => {\n    /**\n     * Scripts has already been injected script,\n     * return to avoid duplicated scripts\n     */\n    if (document.getElementById(this.scriptId)) {\n      this.handleOnLoad();\n      return;\n    }\n\n    const { reCaptchaKey, language, nonce } = this.props;\n    const head = document.getElementsByTagName('head')[0];\n\n    const js = document.createElement('script');\n    js.id = this.scriptId;\n    if (nonce && nonce !== '') {\n      js.setAttribute('nonce', `${nonce}`)\n    }\n    js.src = `${this.googleRecaptchaSrc}?render=${reCaptchaKey}${\n      language ? `&hl=${language}` : ''\n    }`;\n    js.onload = this.handleOnLoad;\n\n    head.appendChild(js);\n  };\n\n  render() {\n    const { children } = this.props;\n\n    return (\n      <GoogleReCaptchaContext.Provider value={this.googleReCaptchaContextValue}>\n        {children}\n      </GoogleReCaptchaContext.Provider>\n    );\n  }\n}\n","'use strict';\n\n/**\n * Copyright 2015, Yahoo! Inc.\n * Copyrights licensed under the New BSD License. See the accompanying LICENSE file for terms.\n */\nvar REACT_STATICS = {\n    childContextTypes: true,\n    contextTypes: true,\n    defaultProps: true,\n    displayName: true,\n    getDefaultProps: true,\n    getDerivedStateFromProps: true,\n    mixins: true,\n    propTypes: true,\n    type: true\n};\n\nvar KNOWN_STATICS = {\n    name: true,\n    length: true,\n    prototype: true,\n    caller: true,\n    callee: true,\n    arguments: true,\n    arity: true\n};\n\nvar defineProperty = Object.defineProperty;\nvar getOwnPropertyNames = Object.getOwnPropertyNames;\nvar getOwnPropertySymbols = Object.getOwnPropertySymbols;\nvar getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\nvar getPrototypeOf = Object.getPrototypeOf;\nvar objectPrototype = getPrototypeOf && getPrototypeOf(Object);\n\nfunction hoistNonReactStatics(targetComponent, sourceComponent, blacklist) {\n    if (typeof sourceComponent !== 'string') { // don't hoist over string (html) components\n\n        if (objectPrototype) {\n            var inheritedComponent = getPrototypeOf(sourceComponent);\n            if (inheritedComponent && inheritedComponent !== objectPrototype) {\n                hoistNonReactStatics(targetComponent, inheritedComponent, blacklist);\n            }\n        }\n\n        var keys = getOwnPropertyNames(sourceComponent);\n\n        if (getOwnPropertySymbols) {\n            keys = keys.concat(getOwnPropertySymbols(sourceComponent));\n        }\n\n        for (var i = 0; i < keys.length; ++i) {\n            var key = keys[i];\n            if (!REACT_STATICS[key] && !KNOWN_STATICS[key] && (!blacklist || !blacklist[key])) {\n                var descriptor = getOwnPropertyDescriptor(sourceComponent, key);\n                try { // Avoid failures from read-only properties\n                    defineProperty(targetComponent, key, descriptor);\n                } catch (e) {}\n            }\n        }\n\n        return targetComponent;\n    }\n\n    return targetComponent;\n}\n\nmodule.exports = hoistNonReactStatics;\n","import hoistNonReactStatics from 'hoist-non-react-statics';\nimport * as React from 'react';\nimport {\n  GoogleReCaptchaConsumer,\n  IGoogleReCaptchaConsumerProps\n} from './google-recaptcha-provider';\n\nexport interface IWithGoogleReCaptchaProps {\n  googleReCaptchaProps: IGoogleReCaptchaConsumerProps;\n}\n\n// tslint:disable-next-line:only-arrow-functions\nexport const withGoogleReCaptcha = function<OwnProps>(\n  Component: React.ComponentType<OwnProps & Partial<IWithGoogleReCaptchaProps>>\n): React.ComponentType<OwnProps & Partial<IWithGoogleReCaptchaProps>> {\n  const WithGoogleReCaptchaComponent: React.FunctionComponent<\n    OwnProps & Partial<IWithGoogleReCaptchaProps>\n  > = props => (\n    <GoogleReCaptchaConsumer>\n      {googleReCaptchaValues => (\n        <Component {...props} googleReCaptchaProps={googleReCaptchaValues} />\n      )}\n    </GoogleReCaptchaConsumer>\n  );\n\n  WithGoogleReCaptchaComponent.displayName = `withGoogleReCaptcha(${Component.displayName ||\n    Component.name ||\n    'Component'})`;\n\n  hoistNonReactStatics(WithGoogleReCaptchaComponent, Component);\n\n  return WithGoogleReCaptchaComponent;\n};\n","import * as React from 'react';\nimport {\n  IWithGoogleReCaptchaProps,\n  withGoogleReCaptcha\n} from './with-google-recaptcha';\n\nexport interface IGoogleRecaptchaProps {\n  onVerify: (token: string) => void | Promise<void>;\n  action?: string;\n}\n\nclass GoogleReCaptcha extends React.Component<IGoogleRecaptchaProps> {\n  async componentDidMount() {\n    const { googleReCaptchaProps, action, onVerify } = this.injectedProps;\n\n    const { executeRecaptcha } = googleReCaptchaProps;\n\n    if (!executeRecaptcha) {\n      return;\n    }\n\n    const token = await executeRecaptcha(action);\n\n    if (!onVerify) {\n      return;\n    }\n\n    onVerify(token);\n  }\n\n  get injectedProps() {\n    return this.props as IGoogleRecaptchaProps & IWithGoogleReCaptchaProps;\n  }\n\n  render() {\n    return null;\n  }\n}\n\nconst WrappedGoogleRecaptcha = withGoogleReCaptcha(GoogleReCaptcha);\n\nexport { WrappedGoogleRecaptcha as GoogleReCaptcha };\n","import * as React from 'react';\nimport { GoogleReCaptchaContext } from './google-recaptcha-provider';\n\nexport const useGoogleReCaptcha = () =>\n  React.useContext(GoogleReCaptchaContext);\n"],"names":["React.createContext","tslib_1.__extends","React.createElement","React.Component","hoistNonReactStatics","React.useContext"],"mappings":"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"}